<nz-card nzTitle="Danh sách những lần chăm sóc" [nzExtra]="extraTemplate">
  <h3>
    Tên khách hàng: <b>{{customer?.full_name}}</b>
  </h3>
  <br/>
  <nz-collapse>
    <nz-collapse-panel
      *ngFor="let care of cares; let i = index"
      [nzHeader]="'Lần ' + (i + 1)"
      [nzExtra]="extraTpl"
    >
      <nz-descriptions>
        <nz-descriptions-item nzTitle="Tên nhân viên" [nzSpan]="3">
          {{care.staff_name}}
        </nz-descriptions-item>
        <nz-descriptions-item nzTitle="Email nhân viên" [nzSpan]="3">
          {{care.staff_email}}
        </nz-descriptions-item>
        <nz-descriptions-item nzTitle="Mô tả" [nzSpan]="3">
          {{care.description}}
        </nz-descriptions-item>
        <nz-descriptions-item nzTitle="Trạng thái" [nzSpan]="3">
          <nz-badge *ngIf="!!care.status" nzStatus="processing" nzText="Hoàn thành"></nz-badge>
          <nz-badge *ngIf="!!!care.status" nzStatus="default" nzText="Chưa hoàn thành"></nz-badge>
        </nz-descriptions-item>
      </nz-descriptions>
      <ng-template #extraTpl>
        {{care.created_at}}
        <span nz-icon nzType="edit"
              [routerLink]="['update', care.id]"
              (click)="$event.stopPropagation()"></span>
      </ng-template>
    </nz-collapse-panel>
  </nz-collapse>
</nz-card>

<ng-template #extraTemplate>
  <!--Button Create-->
  <button
    [routerLink]="['create']"
    class="btn-create"
    nz-button
    nzType="primary"
    *ngxPermissionsOnly="['admin', 'sales', 'agency', 'cooperator', 'sales-manager']"
  >
    <i nz-icon nzTheme="outline" nzType="plus"></i>
    Tạo lần chăm sóc mới
  </button>
</ng-template>


