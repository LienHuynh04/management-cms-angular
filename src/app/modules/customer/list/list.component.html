<!--Filter-->
<nz-card nzTitle="Tìm kiếm" [nzExtra]="extraTemplate" style="margin-bottom: 15px">
  <form nz-form nzLayout="vertical" [formGroup]="filterForm">
    <!--CONTROLS-->
    <div nz-row [nzGutter]="24">
      <div nz-col [nzSpan]="12">
        <nz-form-item>
          <nz-form-label [nzFor]="'full_name'">Tên</nz-form-label>
          <nz-form-control>
            <input
              nz-input
              formControlName="full_name"
            />
          </nz-form-control>
        </nz-form-item>
      </div>

      <!--Search sdt-->
      <div nz-col [nzSpan]="12">
        <nz-form-item>
          <nz-form-label [nzFor]="'phone_number'">Số điện thoại</nz-form-label>
          <nz-form-control>
            <input
              nz-input
              formControlName="phone_number"
            />
          </nz-form-control>
        </nz-form-item>
      </div>

      <!--Search địa chỉ-->
      <div nz-col [nzSpan]="12">
        <nz-form-item>
          <nz-form-label [nzFor]="'address'">Địa chỉ</nz-form-label>
          <nz-form-control>
            <input
              nz-input
              formControlName="address"
            />
          </nz-form-control>
        </nz-form-item>
      </div>

      <!--Search email-->
      <div nz-col [nzSpan]="12">
        <nz-form-item>
          <nz-form-label [nzFor]="'email'">Email</nz-form-label>
          <nz-form-control>
            <input
              nz-input
              formControlName="email"
            />
          </nz-form-control>
        </nz-form-item>
      </div>
    </div>


    <div nz-row>
      <div nz-col [nzSpan]="24" class="search-area">
        <button nz-button (click)="onSearch(true)">Xóa tìm kiếm</button>
        <button nz-button [nzType]="'primary'" (click)="onSearch()">Tìm kiếm</button>
      </div>
    </div>
  </form>
</nz-card>

<nz-card>
  <nz-table
    #basicTable
    [nzBordered]="true"
    [nzData]="records"
    [nzPaginationPosition]="'both'"
    [nzScroll]="{ x: '1600px', y: '100vh' }"
    [nzFrontPagination]="false"
    [nzTotal]="pagination.total"
    [nzPageSize]="pagination.perPage"
    [nzPageIndex]="pagination.currentPage"
    (nzQueryParams)="onQueryParamsChange($event)"
  >
    <thead>
    <tr>
      <th
        *ngFor="let col of cols"
        [nzWidth]="col.style?.width">
        {{col.header}}
      </th>
      <th [nzWidth]="'150px'"></th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let data of basicTable.data">
      <td *ngFor="let col of cols;">
        {{ data[col?.field] }}
      </td>
      <td style="text-align: center">
        <button nz-button
                nzType="primary" nzShape="circle"
                [routerLink]="['update', data.id]"
        >
          <i nz-icon nzType="edit" nzTheme="outline"></i>
        </button>
        <button nz-button
                [disabled]="!data.care.length"
                nzType="default" nzShape="circle"
                (click)="openModalCare(data.care)"
        >
          <i nz-icon nzType="eye" nzTheme="outline"></i>
        </button>
      </td>
    </tr>
    </tbody>
  </nz-table>
</nz-card>

<ng-template #extraTemplate>
  <!--Button Create-->
  <button
    nz-button
    nzType="primary"
    class="btn-create"
    [routerLink]="['/customers', 'create']"
  >
    <i nz-icon nzType="plus" nzTheme="outline"></i>
    Tạo mới
  </button>
</ng-template>
